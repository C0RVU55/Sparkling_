<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">


	<!-- 회원정보 가져오기 세션-->
	<select id="selectUser" parameterType="com.javaex.vo.UserVo" resultType="com.javaex.vo.UserVo">
		<![CDATA[
			SELECT users.user_no,
			       users.nickname,
				   seller.sell_no,
				   seller.book_type,
				   seller.prod_type
			FROM users left outer JOIN seller
			on seller.user_no = users.user_no
			where users.user_id = #{user_id}
			and users.password = #{password}
		]]>
	</select>
	
	<select id="selectOneUserAddress" parameterType="int" resultType="UserVo">
		<![CDATA[
			select address
			from users
			where user_no = #{userNo}
		]]>
	
	</select>
	
	<insert id="sellerBookInsert" parameterType="com.javaex.vo.SellerVo">
		<![CDATA[
			insert into seller (sell_no, 
								  user_no, 
								  book_type,
								  book_sell_name, 
								  book_business_no, 
								  book_sell_address, 
								  book_sell_bank, 
								  book_sell_account
								  )
							VALUES(seq_sell_no.nextval, 
								  #{user_no}, 
								  #{book_type},
								  #{book_sell_name}, 
								  #{book_business_no}, 
								  #{book_sell_address}, 
								  #{book_sell_bank}, 
								  #{book_sell_account}
								  )
		]]>
	</insert>
	
		<insert id="sellerProdInsert" parameterType="com.javaex.vo.SellerVo">
		<![CDATA[
			insert into seller (sell_no, 
								  user_no, 
								  prod_type, 
								  pord_sell_name, 
								  pord_business_no, 
								  pord_sell_address, 
								  pord_sell_bank, 
								  pord_sell_account
								  )
			  	    VALUES(seq_sell_no.nextval, 
								  #{user_no}, 
								  #{prod_type}, 
								  #{pord_sell_name}, 
								  #{pord_business_no}, 
								  #{pord_sell_address}, 
								  #{pord_sell_bank}, 
								  #{pord_sell_account}
								  )
		]]>
	</insert>
	
	<update id="sellerUpdate" parameterType="com.javaex.vo.SellerVo">
		<![CDATA[
			update seller
			set book_type = #{book_type},
				prod_type = #{prod_type}, 
				book_sell_name = #{book_sell_name}, 
				book_business_no = #{book_business_no}, 
				book_sell_address = #{book_sell_address}, 
				book_sell_bank = #{book_sell_bank}, 
				book_sell_account = #{book_sell_account},
				pord_sell_name = #{pord_sell_name}, 
				pord_business_no = #{pord_business_no}, 
				pord_sell_address = #{pord_sell_address}, 
				pord_sell_bank = #{pord_sell_bank}, 
				pord_sell_account = #{pord_sell_account}
			where user_no = #{user_no}	
		]]>
	</update>
</mapper>

