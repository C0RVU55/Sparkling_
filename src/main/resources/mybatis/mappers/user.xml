<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">


	<!-- 회원정보 가져오기 세션-->
	<select id="selectUser" parameterType="com.javaex.vo.UserVo" resultType="com.javaex.vo.UserVo">
		<![CDATA[
			SELECT users.user_no,
			       users.nickname,
				   seller.sell_no,
				   seller.book_type,
				   seller.prod_type
			FROM users left outer JOIN seller
			on seller.user_no = users.user_no
			where users.user_id = #{user_id}
			and users.password = #{password}
		]]>
	</select>
	
	<select id="selectOneUserAddress" parameterType="int" resultType="UserVo">
		<![CDATA[
			select address
			from users
			where user_no = #{userNo}
		]]>
	
	</select>
	
	<insert id="sellerBookInsert" parameterType="com.javaex.vo.SellerVo">
			<selectKey keyProperty="sell_no" resultType="int" order="BEFORE">
				select seq_sell_no.nextval
				from dual
			</selectKey>
		<![CDATA[
			insert into seller (sell_no, 
								  user_no, 
								  book_type,
								  book_sell_name,
								  book_com_name,
								  book_business_no, 
								  book_sell_address, 
								  book_sell_bank, 
								  book_sell_account
								  )
							VALUES(#{sell_no}, 
								  #{user_no}, 
								  #{book_type},
								  #{book_sell_name},
								  #{book_com_name}, 
								  #{book_business_no}, 
								  #{book_sell_address}, 
								  #{book_sell_bank}, 
								  #{book_sell_account}
								  )
		]]>
	</insert>
	
		<insert id="sellerProdInsert" parameterType="com.javaex.vo.SellerVo">
			<selectKey keyProperty="sell_no" resultType="int" order="BEFORE">
				select seq_sell_no.nextval
				from dual
			</selectKey>
		<![CDATA[
			insert into seller (sell_no, 
								  user_no, 
								  prod_type, 
								  prod_sell_name,
								  prod_com_name, 
								  prod_business_no, 
								  prod_sell_address, 
								  prod_sell_bank, 
								  prod_sell_account
								  )
			  	    VALUES(#{sell_no}, 
						  #{user_no}, 
						  #{prod_type}, 
						  #{prod_sell_name}, 
						  #{prod_com_name},
						  #{prod_business_no}, 
						  #{prod_sell_address}, 
						  #{prod_sell_bank}, 
						  #{prod_sell_account}
						  )
		]]>
	</insert>
	
	<select id="sellerSelectOne" parameterType="int" resultType="com.javaex.vo.SellerVo">
		<![CDATA[
			select sell_no,
			       user_no,
			       book_type,
			       prod_type,
			       book_sell_name,
			       book_com_name,
			       book_business_no,
			       book_sell_address,
			       book_sell_bank,
			       book_sell_account,
			       prod_sell_name,
			       prod_business_no,
			       prod_sell_address,
			       prod_sell_bank,
			       prod_sell_account,
			       prod_com_name
			from seller
			where sell_no = #{sell_no}
		]]>
	</select>
	
	<update id="prodSellerUpdate" parameterType="com.javaex.vo.SellerVo">
		<![CDATA[
			update seller
			set prod_type = #{prod_type}, 
				prod_sell_name = #{prod_sell_name}, 
				prod_com_name = #{prod_com_name},
				prod_business_no = #{prod_business_no}, 
				prod_sell_address = #{prod_sell_address}, 
				prod_sell_bank = #{prod_sell_bank}, 
				prod_sell_account = #{prod_sell_account}
			where sell_no = #{sell_no}	
		]]>
	</update>
	
	<update id="bookSellerUpdate" parameterType="com.javaex.vo.SellerVo">
		<![CDATA[
			update seller
			set book_type = #{book_type},
				book_sell_name = #{book_sell_name}, 
				book_com_name = #{book_com_name},
				book_business_no = #{book_business_no}, 
				book_sell_address = #{book_sell_address}, 
				book_sell_bank = #{book_sell_bank}, 
				book_sell_account = #{book_sell_account}
			where sell_no = #{sell_no}	
			]]>
	</update>
	
	<update id="sellerUpdate" parameterType="com.javaex.vo.SellerVo">
		<![CDATA[
			update seller
			set book_type = #{book_type},
				prod_type = #{prod_type}, 
				book_sell_name = #{book_sell_name}, 
				book_com_name = #{book_com_name},
				book_business_no = #{book_business_no}, 
				book_sell_address = #{book_sell_address}, 
				book_sell_bank = #{book_sell_bank}, 
				book_sell_account = #{book_sell_account},
				prod_sell_name = #{prod_sell_name}, 
				prod_com_name = #{prod_com_name},
				prod_business_no = #{prod_business_no}, 
				prod_sell_address = #{prod_sell_address}, 
				prod_sell_bank = #{prod_sell_bank}, 
				prod_sell_account = #{prod_sell_account}
			where user_no = #{user_no}	
		]]>
	</update>
</mapper>

